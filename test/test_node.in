/* -*- c -*- */

header {
##include "lptree/lptnspecint.h"
##include "lptree/lptnode.h"
}

unit /* node-int */
{
  data {
    LptNSpec *nspec;
    LptNode *node;
  }

  setup {
    data->nspec = lpt_nspec_int_new("INT", -10, 10, 2);
    data->node = lpt_node_new(data->nspec, NULL, NULL);
  }

  teardown {
    L_OBJECT_CLEAR(data->node);
    L_OBJECT_CLEAR(data->nspec);
  }

  test { 
    PIF_CHECK(data->node);
  }

  test {
    LObject *val;
    val = L_OBJECT(l_int_new(42));
    lpt_node_set_value(data->node, val);
    L_OBJECT_CLEAR(val);
    val = lpt_node_get_value(data->node);
    PIF_CHECK(L_IS_INT(val));
    PIF_CHECK(L_INT_VALUE(val) == 42);
    L_OBJECT_CLEAR(val);
  }
}
